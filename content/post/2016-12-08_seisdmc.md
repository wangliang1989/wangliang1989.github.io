---
title: "备份中心数据下载"
date: 2016-12-14T10:08:41+08:00
lastmod: 2016-12-14T10:08:41+08:00
draft: false
tags: ["备份中心"]
categories: ["数据获取"]
author: 王亮
weight: 10
contentCopyright: '<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank">CC 4.0</a>'
mathjax: false
slug: seisdmc
---

备份中心的地址是 <http://www.seisdmc.ac.cn/>。

# 用户定制方式波形数据申请

## 地震事件波形数据

登陆以后，打开『GIS浏览』选项卡的页面，可以看到一副地图。地图的左侧有一个隐藏的“按钮”，点击。选『用户定制方式波形数据申请』。
点击左侧半隐藏的选项卡中的『用户定制方式波形数据申请』。点击『事件数据』。

之后在弹出的页面中，项目信息里选择项目(项目需要自己事前在『个人工作台』手动添加，不清楚如果没有课题项目该怎么办)，选中地震事件波形数据。点『下一步』。在新弹出的窗口中进一步设置波形的截取标准。需要注意的是，数据截取长度中『之前』和『之后』两个空都是负数代表参考时刻之前，正数代表参考时刻之后。

关于地震目录的格式，要像下面这样：

```
2016/10/17 15:14:48.00 32.88 94.90  9  6.10 ML
2016/10/17 15:32:22.00 32.84 94.89  9  3.50 ML
2016/10/17 15:33:35.00 32.87 94.86  8  4.10 ML
2016/10/17 15:51:29.00 32.86 94.95 10  3.00 ML
```

网页上有关于格式的说明。但是如果是用笔记本这样的小屏幕，会显示不全。说明主要是说地震目录必须是 txt 后缀的文本文件，每一行一条地震记录，用空格分隔，整个文件不能出现中文和中文标点符号。每行的含义依次是发震日期，发震时刻，震中纬度、经度和震源深度，然后是地震震级和震级类型(不清楚为何需要震级信息)。经过我的试验还要满足如下要求，否则在上传地震目录后会说数据异常：

1. 时间中秒必须带有小数点。
2. 震源深度必须是整数。
3. 先发生的事件要放在前面。

# 数据下载

在数据量不大的情况下，用户是通过 ftp 下载数据。

手动打开 ftp 网页去下载很麻烦，加之又不可能有谁在 Windows 上做地震学科研，所有我认为用 wget 命令是最佳的方式：

```bash
wget -P data -m -nd -np -r -c --ftp-user=aki --ftp-password=123456 ftp://192.168.1.1/20161209.SEED
```

下面说明这个命令：

1. 这句命令可以实现断点续传，即便传输因故中断，只需要再次运行命令就可以续传。
2. -P data 是说数据保存在当前路径下的 data 目录(没有这个目录，会创建)。
3. --ftp-user=aki 是说你在备份中心的用户名是 aki。aki 这个用户名是我虚构的。
4. --ftp-password=123456 是说你在备份中心的用户密码是 123456。123456 这个密码是我虚构的。
5. ftp://192.168.1.1/20161209.SEED ftp地址。192.168.1.1 这个地址是我虚构的，真实的地址，备份中心会告诉你。

因为 ftp 服务可能会被伪装为攻击流量，很多网络管理员禁用了 ftp。对此，可以把以下内容保存到 ~/.wgetrc 解决

```
# Ignore `robots.txt` and `<meta name=robots content=nofollow>`
robots = off
```
# 一些脚本

[IRIS 地震目录转备份中心地震目录](https://gist.github.com/wangliang1989/e9da9857127d0ef6bf285ead7d05fd4f)
